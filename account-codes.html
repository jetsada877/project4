<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Collapsible Menu</title>
    <link rel="stylesheet" href="menu.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f7f7f7;
        }
        .container {
            max-width: 800px;
            margin: 20px auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            color: #333;
        }
        form {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        input {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        button {
            padding: 10px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        table th, table td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: left;
        }
        table th {
            background-color: #f8f8f8;
        }
        table tr:hover {
            background-color: #f1f1f1;
        }
        .actions button {
            padding: 6px 12px;
            background-color: #f0ad4e;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .actions button:hover {
            background-color: #e09b3d;
        }
    </style>
</head>
<body>
    <!-- Header ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô -->
    <header class="menu-header">
        <h1 id="username-display">Welcome, [Username]</h1>
        <a href="index.html" class="logout-btn" id="logout">Logout</a>
    </header>

    <!-- Sidebar Menu -->
    <nav class="menu-nav" id="menu">
        <button class="toggle-btn" id="toggle-btn">‚ò∞</button>
        <ul>
            <li>
                <a href="menu.html">
                    <span class="menu-icon">üñ•Ô∏è</span>
                    <span class="menu-text">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</span>
                </a>
            </li>
            <li>
                <a href="dashboard.html">
                    <span class="menu-icon">üìä</span>
                    <span class="menu-text">Dashboard</span>
                </a>
            </li>
            <li>
                <a href="javascript:void(0)" class="menu-toggle">
                    <span class="menu-icon">üíµ</span>
                    <span class="menu-text">‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢</span>
                </a>
                <ul class="submenu">
                    <li><a href="expenses-add.html">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢</a></li>
                    <li><a href="expenses-view.html">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢</a></li>
                    <li><a href="expenses-reports.html">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢</a></li>
                </ul>
            </li>          
            <li>
                <a href="user-management.html">
                    <span class="menu-icon">üë§</span>
                    <span class="menu-text">User Management</span>
                </a>
            </li>
            <li>
                <a href="reports.html">
                    <span class="menu-icon">üìà</span>
                    <span class="menu-text">Reports</span>
                </a>
            </li>
            <li>
                <a href="account-codes.html">
                    <span class="menu-icon">üìÇ</span>
                    <span class="menu-text">Account Codes</span>
                </a>
            </li>            
            <li>
                <a href="settings.html">
                    <span class="menu-icon">‚öôÔ∏è</span>
                    <span class="menu-text">Settings</span>
                </a>
            </li>
        </ul>
    </nav>

    <!-- Content -->
    <div class="content" id="content">
            <!-- Content -->

            <h1>Manage Account Codes</h1>
        
            <!-- Form ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ö‡∏±‡∏ç‡∏ä‡∏µ -->
            <form id="accountForm">
                <input type="text" id="accountCode" placeholder="Account Code" required>
                <input type="text" id="accountType" placeholder="Type" required>
                <input type="text" id="accountCategory" placeholder="Category" required>
                <input type="text" id="accountDetails" placeholder="Details" required>
                <button type="submit">Add Account</button>
            </form>
    
            <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ö‡∏±‡∏ç‡∏ä‡∏µ -->
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Code</th>
                        <th>Type</th>
                        <th>Category</th>
                        <th>Details</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="accountTable">
                    <!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏´‡∏±‡∏™‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
                </tbody>
            </table>
        </div>
        <script>
            // ‡∏î‡∏∂‡∏á‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏µ class menu-toggle
            const menuToggles = document.querySelectorAll('.menu-toggle');
        
            menuToggles.forEach(toggle => {
                toggle.addEventListener('click', (e) => {
                    e.preventDefault();
                    toggle.classList.toggle('open'); // ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏ô‡∏π‡∏¢‡πà‡∏≠‡∏¢
                });
            });
        </script>
        <script>
            const apiUrl = 'http://192.168.1.149:3000/accounts';
    
            // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏´‡∏±‡∏™‡∏ö‡∏±‡∏ç‡∏ä‡∏µ
            const loadAccounts = async () => {
                const response = await fetch(apiUrl);
                const accounts = await response.json();
                const table = document.getElementById('accountTable');
                table.innerHTML = '';
                accounts.forEach(account => {
                    table.innerHTML += `
                        <tr>
                            <td>${account.id}</td>
                            <td>${account.code}</td>
                            <td>${account.type}</td>
                            <td>${account.category}</td>
                            <td>${account.details}</td>
                            <td class="actions">
                                <button onclick="deleteAccount(${account.id})">Delete</button>
                            </td>
                        </tr>
                    `;
                });
            };
    
            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ö‡∏±‡∏ç‡∏ä‡∏µ
            document.getElementById('accountForm').addEventListener('submit', async (e) => {
                e.preventDefault();
                const code = document.getElementById('accountCode').value;
                const type = document.getElementById('accountType').value;
                const category = document.getElementById('accountCategory').value;
                const details = document.getElementById('accountDetails').value;
    
                await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ code, type, category, details })
                });
    
                document.getElementById('accountForm').reset();
                loadAccounts();
            });
    
            // ‡∏•‡∏ö‡∏£‡∏´‡∏±‡∏™‡∏ö‡∏±‡∏ç‡∏ä‡∏µ
            const deleteAccount = async (id) => {
                const confirmDelete = confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ?');
                if (confirmDelete) {
                    await fetch(`${apiUrl}/${id}`, { method: 'DELETE' });
                    loadAccounts();
                }
            };
    
            // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
            loadAccounts();
        </script>


    <!-- JavaScript -->
    <script>
        // ‡∏î‡∏∂‡∏á Element ‡∏ï‡πà‡∏≤‡∏á ‡πÜ
        const menu = document.getElementById("menu");
        const toggleBtn = document.getElementById("toggle-btn");
        const content = document.getElementById("content");
    
        // ‡πÄ‡∏û‡∏¥‡πà‡∏° Event Listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏° Toggle
        toggleBtn.addEventListener("click", () => {
            menu.classList.toggle("collapsed"); // ‡∏¢‡πà‡∏≠/‡∏Ç‡∏¢‡∏≤‡∏¢‡πÄ‡∏°‡∏ô‡∏π
            content.classList.toggle("collapsed"); // ‡∏Ç‡∏¢‡∏≤‡∏¢/‡∏¢‡πà‡∏≠ Content ‡∏ï‡∏≤‡∏°
        });
    
// ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏à‡∏≤‡∏Å localStorage
const loggedInUser = JSON.parse(localStorage.getItem('loggedInUser'));

if (loggedInUser) {
    document.getElementById('username-display').textContent = `Welcome, ${loggedInUser.username}`;
} else {
    // ‡∏´‡∏≤‡∏Å‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Login
    window.location.href = 'login.html';
}

    
    
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Logout
        document.getElementById("logout").addEventListener("click", (e) => {
        e.preventDefault();
        const confirmLogout = confirm("‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?");
        if (confirmLogout) {
            localStorage.removeItem("loggedInUser");
            window.location.href = "index.html";
        }
    });
    
    </script>
</body>
</html>
